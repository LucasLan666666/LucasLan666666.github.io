# **第四章：核心流程分析**

先前在第二章的[启动服务](./2.md#启动服务)小节中，已经简要介绍了 frp 服务的部署与启动流程。
本章中，我们将把注意力放在 frp 服务的核心流程——**数据传输**上，这也是 frp 服务的根本目的。

![workflow](assets/workflow.png)

1. **建立连接**：
    - `frpc`会定时向`frps`发送**心跳包**以保持连接。
    - 当有外部请求到达`frps`，`frps`将请求转发给合适的`frpc`客户端，再由`frpc`将请求转发到
    内网的目标服务。

2. **数据传输**：
    - 通过 frp 的转发，外部用户就能访问内网的服务，实现内网穿透的效果。
    - 此外，经过 frp 传输的数据都通过了加密处理，以保证传输安全。
